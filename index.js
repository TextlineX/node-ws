function _0x8c8e(_0x28e93a,_0x168de0){const _0x4c97a0=_0x4c97();return _0x8c8e=function(_0x8c8e96,_0x1a81f0){_0x8c8e96=_0x8c8e96-0x6b;let _0x120465=_0x4c97a0[_0x8c8e96];return _0x120465;},_0x8c8e(_0x28e93a,_0x168de0);}const _0x59f996=_0x8c8e;(function(_0x8cc27b,_0x19be99){const _0x3b9e5b=_0x8c8e,_0x2be5a2=_0x8cc27b();while(!![]){try{const _0xa27c0b=parseInt(_0x3b9e5b(0xc7))/0x1*(parseInt(_0x3b9e5b(0x79))/0x2)+-parseInt(_0x3b9e5b(0xac))/0x3*(-parseInt(_0x3b9e5b(0xde))/0x4)+-parseInt(_0x3b9e5b(0x98))/0x5*(-parseInt(_0x3b9e5b(0xc1))/0x6)+-parseInt(_0x3b9e5b(0x95))/0x7*(parseInt(_0x3b9e5b(0x71))/0x8)+-parseInt(_0x3b9e5b(0x80))/0x9*(parseInt(_0x3b9e5b(0x88))/0xa)+-parseInt(_0x3b9e5b(0xd8))/0xb+-parseInt(_0x3b9e5b(0x7d))/0xc*(-parseInt(_0x3b9e5b(0xb7))/0xd);if(_0xa27c0b===_0x19be99)break;else _0x2be5a2['push'](_0x2be5a2['shift']());}catch(_0x22d484){_0x2be5a2['push'](_0x2be5a2['shift']());}}}(_0x4c97,0xe2560));const os=require('os'),http=require(_0x59f996(0xd6)),fs=require('fs'),axios=require(_0x59f996(0xb1)),net=require(_0x59f996(0xa1)),path=require(_0x59f996(0xca)),crypto=require(_0x59f996(0x92)),{Buffer}=require(_0x59f996(0x89)),{exec,execSync}=require(_0x59f996(0x90)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x59f996(0xdc)]['UUID']||'17687fd0-5bce-4604-8b25-214ab080ad9a',NEZHA_SERVER=process[_0x59f996(0xdc)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x59f996(0xdc)][_0x59f996(0xc5)]||'',NEZHA_KEY=process['env'][_0x59f996(0xaa)]||'',DOMAIN=process[_0x59f996(0xdc)]['DOMAIN']||_0x59f996(0x6e),AUTO_ACCESS=process[_0x59f996(0xdc)][_0x59f996(0xd2)]||![],WSPATH=process[_0x59f996(0xdc)]['WSPATH']||UUID[_0x59f996(0xe9)](0x0,0x8),SUB_PATH=process[_0x59f996(0xdc)][_0x59f996(0x8a)]||_0x59f996(0x7e),NAME=process[_0x59f996(0xdc)][_0x59f996(0x8d)]||'',PORT=process[_0x59f996(0xdc)][_0x59f996(0xd0)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x186b03=_0x59f996;try{const _0x5d7726=await axios[_0x186b03(0xd5)]('https://speed.cloudflare.com/meta'),_0x507575=_0x5d7726[_0x186b03(0x6b)];ISP=(_0x507575[_0x186b03(0xa5)]+'-'+_0x507575[_0x186b03(0xe7)])['replace'](/ /g,'_');}catch(_0xd1a9d8){ISP=_0x186b03(0xa9);}};GetISP();const httpServer=http[_0x59f996(0xc2)]((_0x3de698,_0x202874)=>{const _0x58f070=_0x59f996;if(_0x3de698[_0x58f070(0xa3)]==='/'){const _0x2c5ce9=path[_0x58f070(0xc6)](__dirname,_0x58f070(0xbc));fs['readFile'](_0x2c5ce9,_0x58f070(0xc3),(_0xdf977e,_0x4da084)=>{const _0x3f6bf6=_0x58f070;if(_0xdf977e){_0x202874[_0x3f6bf6(0x77)](0xc8,{'Content-Type':'text/html'}),_0x202874[_0x3f6bf6(0xa6)](_0x3f6bf6(0x84));return;}_0x202874['writeHead'](0xc8,{'Content-Type':_0x3f6bf6(0xb9)}),_0x202874['end'](_0x4da084);});return;}else{if(_0x3de698['url']==='/'+SUB_PATH){const _0x3c4c08=NAME?NAME+'-'+ISP:ISP,_0x26c52a=_0x58f070(0xc4)+UUID+_0x58f070(0xe6)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x58f070(0x7b)+WSPATH+'#'+_0x3c4c08,_0x47ff06=_0x58f070(0xea)+UUID+_0x58f070(0xbb)+DOMAIN+_0x58f070(0xc9)+DOMAIN+_0x58f070(0x7b)+WSPATH+'#'+_0x3c4c08,_0x263b55=_0x26c52a+'\x0a'+_0x47ff06,_0x108562=Buffer['from'](_0x263b55)['toString'](_0x58f070(0xab));_0x202874['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x202874[_0x58f070(0xa6)](_0x108562+'\x0a');}else _0x202874[_0x58f070(0x77)](0x194,{'Content-Type':'text/plain'}),_0x202874['end'](_0x58f070(0x74));}}),wss=new WebSocket[(_0x59f996(0x8c))]({'server':httpServer}),uuid=UUID[_0x59f996(0xe0)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x2789f1){return new Promise((_0x10d90e,_0x27bfb5)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2789f1)){_0x10d90e(_0x2789f1);return;}let _0x52d7d3=0x0;function _0x31eeec(){const _0x4aa8c9=_0x8c8e;if(_0x52d7d3>=DNS_SERVERS[_0x4aa8c9(0xad)]){_0x27bfb5(new Error(_0x4aa8c9(0xcd)+_0x2789f1+_0x4aa8c9(0xdd)));return;}const _0x18ed50=DNS_SERVERS[_0x52d7d3];_0x52d7d3++;const _0x4ed7dd=_0x4aa8c9(0x78)+encodeURIComponent(_0x2789f1)+_0x4aa8c9(0xc8);axios[_0x4aa8c9(0xd5)](_0x4ed7dd,{'timeout':0x1388,'headers':{'Accept':_0x4aa8c9(0xd7)}})['then'](_0xfb08c1=>{const _0x2cc405=_0x4aa8c9,_0x337774=_0xfb08c1[_0x2cc405(0x6b)];if(_0x337774['Status']===0x0&&_0x337774[_0x2cc405(0x73)]&&_0x337774[_0x2cc405(0x73)][_0x2cc405(0xad)]>0x0){const _0x4ca97e=_0x337774[_0x2cc405(0x73)][_0x2cc405(0xc0)](_0x167f2f=>_0x167f2f['type']===0x1);if(_0x4ca97e){_0x10d90e(_0x4ca97e['data']);return;}}_0x31eeec();})[_0x4aa8c9(0x82)](_0x4d1fdc=>{_0x31eeec();});}_0x31eeec();});}function handleVlessConnection(_0x20d67d,_0xdbc3bb){const _0x5c40eb=_0x59f996,[_0xcee797]=_0xdbc3bb,_0x41816=_0xdbc3bb[_0x5c40eb(0xe9)](0x1,0x11);if(!_0x41816[_0x5c40eb(0x86)]((_0x3131c0,_0x158766)=>_0x3131c0==parseInt(uuid[_0x5c40eb(0xe2)](_0x158766*0x2,0x2),0x10)))return![];let _0x251b4c=_0xdbc3bb[_0x5c40eb(0xe9)](0x11,0x12)[_0x5c40eb(0xdf)]()+0x13;const _0x8ec631=_0xdbc3bb[_0x5c40eb(0xe9)](_0x251b4c,_0x251b4c+=0x2)[_0x5c40eb(0x9a)](0x0),_0x3fb6b5=_0xdbc3bb['slice'](_0x251b4c,_0x251b4c+=0x1)[_0x5c40eb(0xdf)](),_0x76631d=_0x3fb6b5==0x1?_0xdbc3bb[_0x5c40eb(0xe9)](_0x251b4c,_0x251b4c+=0x4)[_0x5c40eb(0xc6)]('.'):_0x3fb6b5==0x2?new TextDecoder()[_0x5c40eb(0xa4)](_0xdbc3bb[_0x5c40eb(0xe9)](_0x251b4c+0x1,_0x251b4c+=0x1+_0xdbc3bb['slice'](_0x251b4c,_0x251b4c+0x1)['readUInt8']())):_0x3fb6b5==0x3?_0xdbc3bb[_0x5c40eb(0xe9)](_0x251b4c,_0x251b4c+=0x10)[_0x5c40eb(0x8e)]((_0x5d2ed3,_0x5aee35,_0xf13936,_0x6f6c49)=>_0xf13936%0x2?_0x5d2ed3[_0x5c40eb(0x6f)](_0x6f6c49['slice'](_0xf13936-0x1,_0xf13936+0x1)):_0x5d2ed3,[])['map'](_0x8e01a1=>_0x8e01a1[_0x5c40eb(0x9a)](0x0)[_0x5c40eb(0xdb)](0x10))['join'](':'):'';_0x20d67d[_0x5c40eb(0xaf)](new Uint8Array([_0xcee797,0x0]));const _0x32f0b6=createWebSocketStream(_0x20d67d);return resolveHost(_0x76631d)[_0x5c40eb(0xe1)](_0x3ba1d8=>{const _0x4b6d0b=_0x5c40eb;net['connect']({'host':_0x3ba1d8,'port':_0x8ec631},function(){const _0x20937e=_0x8c8e;this[_0x20937e(0xa8)](_0xdbc3bb[_0x20937e(0xe9)](_0x251b4c)),_0x32f0b6['on'](_0x20937e(0x81),()=>{})[_0x20937e(0xba)](this)['on'](_0x20937e(0x81),()=>{})[_0x20937e(0xba)](_0x32f0b6);})['on'](_0x4b6d0b(0x81),()=>{});})[_0x5c40eb(0x82)](_0x1a4c50=>{const _0x156384=_0x5c40eb;net[_0x156384(0xb6)]({'host':_0x76631d,'port':_0x8ec631},function(){const _0x2cff43=_0x156384;this[_0x2cff43(0xa8)](_0xdbc3bb['slice'](_0x251b4c)),_0x32f0b6['on']('error',()=>{})[_0x2cff43(0xba)](this)['on']('error',()=>{})[_0x2cff43(0xba)](_0x32f0b6);})['on'](_0x156384(0x81),()=>{});}),!![];}function _0x4c97(){const _0x279a2b=['toString','env','\x20with\x20all\x20DNS\x20servers','2624324EbYSlv','readUInt8','replace','then','substr','once','connection','split','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','asOrganization','hex','slice','trojan://','includes','data','chmod\x20+x\x20npm','log','1234.abc.com','concat','pop','9603688OzeLMg','https://oooo.serv00.net/add-url','Answer','Not\x20Found\x0a','sha224','443','writeHead','https://dns.google/resolve?name=','8MiNPeG','createHash','&path=%2F','https://amd64.ssss.nyc.mn/v1','60lmCIiZ','sub','\x20-p\x20','9AEkUtD','error','catch','writeFileSync','Hello\x20world!','npm\x20is\x20already\x20running,\x20skip\x20running...','every','application/json','15014770ZZsCWw','buffer','SUB_PATH','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Server','NAME','reduce','--tls','child_process','https://arm64.ssss.nyc.mn/agent','crypto','setsid\x20nohup\x20./npm\x20-s\x20','https://amd64.ssss.nyc.mn/agent','7yMkvpG','npm','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','10WWBvcc','npm\x20download\x20successfully','readUInt16BE','Automatic\x20Access\x20Task\x20added\x20successfully','trim','2087','Server\x20is\x20running\x20on\x20port\x20','digest','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','net','close','url','decode','country','end','finish','write','Unknown','NEZHA_KEY','base64','6QzopMf','length','aarch64','send','error:\x20','axios','2083','arm64','arch','arm','connect','3042728DQFWpb','true','text/html','pipe','@cdns.doon.eu.org:443?security=tls&sni=','index.html','client_secret:\x20','message','config.yaml','find','519522YeIloR','createServer','utf8','vless://','NEZHA_PORT','join','336437oHvTrT','&type=A','&fp=chrome&type=ws&host=','path','2053','npm\x20is\x20running','Failed\x20to\x20resolve\x20','unlink','2096','PORT','https://','AUTO_ACCESS','update','stream','get','http','application/dns-json','4095894tQHnkH','false','utf-8'];_0x4c97=function(){return _0x279a2b;};return _0x4c97();}function handleTrojanConnection(_0x7219ab,_0xb1961e){const _0x2975aa=_0x59f996;try{if(_0xb1961e[_0x2975aa(0xad)]<0x3a)return![];const _0x71d1df=_0xb1961e[_0x2975aa(0xe9)](0x0,0x38)[_0x2975aa(0xdb)](),_0x22702a=[UUID];let _0x4e1312=null;for(const _0x1eb758 of _0x22702a){const _0x36ddeb=crypto[_0x2975aa(0x7a)](_0x2975aa(0x75))[_0x2975aa(0xd3)](_0x1eb758)[_0x2975aa(0x9f)](_0x2975aa(0xe8));if(_0x36ddeb===_0x71d1df){_0x4e1312=_0x1eb758;break;}}if(!_0x4e1312)return![];let _0x50c867=0x38;_0xb1961e[_0x50c867]===0xd&&_0xb1961e[_0x50c867+0x1]===0xa&&(_0x50c867+=0x2);const _0x1b01af=_0xb1961e[_0x50c867];if(_0x1b01af!==0x1)return![];_0x50c867+=0x1;const _0x57d711=_0xb1961e[_0x50c867];_0x50c867+=0x1;let _0x8ed476,_0x3619d0;if(_0x57d711===0x1)_0x8ed476=_0xb1961e['slice'](_0x50c867,_0x50c867+0x4)[_0x2975aa(0xc6)]('.'),_0x50c867+=0x4;else{if(_0x57d711===0x3){const _0x4f4292=_0xb1961e[_0x50c867];_0x50c867+=0x1,_0x8ed476=_0xb1961e[_0x2975aa(0xe9)](_0x50c867,_0x50c867+_0x4f4292)[_0x2975aa(0xdb)](),_0x50c867+=_0x4f4292;}else{if(_0x57d711===0x4)_0x8ed476=_0xb1961e[_0x2975aa(0xe9)](_0x50c867,_0x50c867+0x10)[_0x2975aa(0x8e)]((_0x8a82e6,_0x1e05bb,_0x4c8371,_0x4107d8)=>_0x4c8371%0x2?_0x8a82e6[_0x2975aa(0x6f)](_0x4107d8[_0x2975aa(0xe9)](_0x4c8371-0x1,_0x4c8371+0x1)):_0x8a82e6,[])['map'](_0x5c4568=>_0x5c4568['readUInt16BE'](0x0)[_0x2975aa(0xdb)](0x10))[_0x2975aa(0xc6)](':'),_0x50c867+=0x10;else return![];}}_0x3619d0=_0xb1961e[_0x2975aa(0x9a)](_0x50c867),_0x50c867+=0x2;_0x50c867<_0xb1961e[_0x2975aa(0xad)]&&_0xb1961e[_0x50c867]===0xd&&_0xb1961e[_0x50c867+0x1]===0xa&&(_0x50c867+=0x2);const _0x4a461f=createWebSocketStream(_0x7219ab);return resolveHost(_0x8ed476)[_0x2975aa(0xe1)](_0x293fd9=>{const _0x5c2257=_0x2975aa;net['connect']({'host':_0x293fd9,'port':_0x3619d0},function(){const _0x5975de=_0x8c8e;_0x50c867<_0xb1961e[_0x5975de(0xad)]&&this[_0x5975de(0xa8)](_0xb1961e[_0x5975de(0xe9)](_0x50c867)),_0x4a461f['on'](_0x5975de(0x81),()=>{})[_0x5975de(0xba)](this)['on'](_0x5975de(0x81),()=>{})[_0x5975de(0xba)](_0x4a461f);})['on'](_0x5c2257(0x81),()=>{});})[_0x2975aa(0x82)](_0x5755c4=>{const _0x1c80b8=_0x2975aa;net[_0x1c80b8(0xb6)]({'host':_0x8ed476,'port':_0x3619d0},function(){const _0x5e96e2=_0x1c80b8;_0x50c867<_0xb1961e[_0x5e96e2(0xad)]&&this['write'](_0xb1961e[_0x5e96e2(0xe9)](_0x50c867)),_0x4a461f['on'](_0x5e96e2(0x81),()=>{})[_0x5e96e2(0xba)](this)['on']('error',()=>{})[_0x5e96e2(0xba)](_0x4a461f);})['on']('error',()=>{});}),!![];}catch(_0x382831){return![];}}wss['on'](_0x59f996(0xe4),(_0x33916,_0x35d814)=>{const _0x41d597=_0x59f996,_0x54320d=_0x35d814[_0x41d597(0xa3)]||'';_0x33916[_0x41d597(0xe3)](_0x41d597(0xbe),_0x569df3=>{const _0x2b173b=_0x41d597;if(_0x569df3[_0x2b173b(0xad)]>0x11&&_0x569df3[0x0]===0x0){const _0x256d95=_0x569df3[_0x2b173b(0xe9)](0x1,0x11),_0x564457=_0x256d95['every']((_0x43d3a5,_0x3c326e)=>_0x43d3a5==parseInt(uuid[_0x2b173b(0xe2)](_0x3c326e*0x2,0x2),0x10));if(_0x564457){!handleVlessConnection(_0x33916,_0x569df3)&&_0x33916['close']();return;}}!handleTrojanConnection(_0x33916,_0x569df3)&&_0x33916[_0x2b173b(0xa2)]();})['on'](_0x41d597(0x81),()=>{});});const getDownloadUrl=()=>{const _0x420601=_0x59f996,_0x77dfb8=os[_0x420601(0xb4)]();return _0x77dfb8===_0x420601(0xb5)||_0x77dfb8===_0x420601(0xb3)||_0x77dfb8===_0x420601(0xae)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x420601(0x91):!NEZHA_PORT?_0x420601(0x7c):_0x420601(0x94);},downloadFile=async()=>{const _0x595a0c=_0x59f996;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x21587d=getDownloadUrl(),_0x313bfa=await axios({'method':_0x595a0c(0xd5),'url':_0x21587d,'responseType':_0x595a0c(0xd4)}),_0x117fc1=fs['createWriteStream']('npm');return _0x313bfa['data'][_0x595a0c(0xba)](_0x117fc1),new Promise((_0x31e357,_0x15aa24)=>{const _0x4c2d51=_0x595a0c;_0x117fc1['on'](_0x4c2d51(0xa7),()=>{const _0x3613da=_0x4c2d51;console[_0x3613da(0x6d)](_0x3613da(0x99)),exec(_0x3613da(0x6c),_0x1a183a=>{if(_0x1a183a)_0x15aa24(_0x1a183a);_0x31e357();});}),_0x117fc1['on'](_0x4c2d51(0x81),_0x15aa24);});}catch(_0x9830c7){throw _0x9830c7;}},runnz=async()=>{const _0x776c9c=_0x59f996;try{const _0x32fee5=execSync(_0x776c9c(0xa0),{'encoding':_0x776c9c(0xda)});if(_0x32fee5[_0x776c9c(0x9c)]()!==''){console[_0x776c9c(0x6d)](_0x776c9c(0x85));return;}}catch(_0x581853){}await downloadFile();let _0x450df5='',_0x4e8a5f=[_0x776c9c(0x76),'8443',_0x776c9c(0xcf),_0x776c9c(0x9d),_0x776c9c(0xb2),_0x776c9c(0xcb)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3eedbd=_0x4e8a5f[_0x776c9c(0xeb)](NEZHA_PORT)?_0x776c9c(0x8f):'';_0x450df5=_0x776c9c(0x93)+NEZHA_SERVER+':'+NEZHA_PORT+_0x776c9c(0x7f)+NEZHA_KEY+'\x20'+_0x3eedbd+_0x776c9c(0x97);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2cca00=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x776c9c(0xe5)](':')[_0x776c9c(0x70)]():'',_0x4d611c=_0x4e8a5f[_0x776c9c(0xeb)](_0x2cca00)?_0x776c9c(0xb8):_0x776c9c(0xd9),_0x73902d=_0x776c9c(0xbd)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4d611c+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x776c9c(0x83)](_0x776c9c(0xbf),_0x73902d);}_0x450df5=_0x776c9c(0x8b);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x450df5,{'shell':'/bin/bash'},_0x447028=>{const _0x2b0a71=_0x776c9c;if(_0x447028)console[_0x2b0a71(0x81)]('npm\x20running\x20error:',_0x447028);else console[_0x2b0a71(0x6d)](_0x2b0a71(0xcc));});}catch(_0x5b8b78){console[_0x776c9c(0x81)](_0x776c9c(0xb0)+_0x5b8b78);}};async function addAccessTask(){const _0x5a07a1=_0x59f996;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4bef92=_0x5a07a1(0xd1)+DOMAIN+'/'+SUB_PATH;try{const _0x5dee80=await axios['post'](_0x5a07a1(0x72),{'url':_0x4bef92},{'headers':{'Content-Type':_0x5a07a1(0x87)}});console['log'](_0x5a07a1(0x9b));}catch(_0x1ea8b9){}}const delFiles=()=>{const _0x5cfe41=_0x59f996;fs[_0x5cfe41(0xce)](_0x5cfe41(0x96),()=>{}),fs['unlink'](_0x5cfe41(0xbf),()=>{});};httpServer['listen'](PORT,()=>{const _0xff442=_0x59f996;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xff442(0x6d)](_0xff442(0x9e)+PORT);});
